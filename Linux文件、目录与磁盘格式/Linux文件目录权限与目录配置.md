#Linux文件目录权限与目录配置

记住，在Linux的世界里，一切都会被看做是文件。

### 一、用户与用户组

首先看到这个概念的时候，我的第一个疑问是为什么要有用户和用户组的概念？

查阅资料发现，Linux是支持多用户的，这在当时是一个非常先进的特性，可以支持多用户同时登录，还能保证每个用户使用系统的大部分功能，而在你访问期间根本意识不到有其他用户的存在，但是转念一想，如果大家一起登录，那么很多私有信息怎么不被其他人看到，这就是个问题了，专业术语管这个叫权限，用户和用户组就是为了解决文件的权限问题的，权限就是指访问和执行的权限。

既然了解了为什么要有用户和用户组，就来深入了解一下吧。
Linux将用户可以访问一个文件的身份分为了3种，也就是进一步的将权限的级别进行分类。，即为Owner、Group、others，接下来针对这三种身份，详细介绍。

举一个生活中的实际例子在说明gainn份的问题，假设你生活在一个四口之家，家庭成员分别是你，爸爸，妈妈，哥哥，你们共有这一栋房子，大家都可以在客厅里活动，那么客厅就相当于大家的用户组Group，也就是大家都可以访问的位置，但是每个人都有一个自己的房间，这个房间别人可以进来，但是房间里的抽屉是除了你以外其他人打不开的，这就是用户Owner的概念，你有自己的私人领域。如果还有一个隔壁老王，它是没有你家的钥匙的，他自然无法访问你家，但是如果用户组的成员里有和他关系不错的，可以给老王开门，让他进来，这个身份就是others。

当然在Linux世界种有一个大佬级别的存在的身份，就是root，它就像神一样，可以自由去到自己想去的地方，去访问它想访问的文件，真正的自由自在，随心所欲。

### 二、Linux文件权限概念
知道了用户的是哪种身份之后，就到了实际操作的部分了，介绍如何将这几种身份赋予我想要处理的文件上。

首先让我们先把用户切换到root账户，因为有很多的权限相关的指令是要使用root账户来操作的，如果你是第一次切换，root用户还没有设置过密码，所以你需要执行以下的操作：
sudo -i
sudo passwd root
输入两次密码后，密码设置成功，然后可以执行sudo su，输入密码后切换到root账户。

![Linux文件属性](https://github.com/xfmax/Linux/blob/master/Linux%E6%96%87%E4%BB%B6%E3%80%81%E7%9B%AE%E5%BD%95%E4%B8%8E%E7%A3%81%E7%9B%98%E6%A0%BC%E5%BC%8F/image/linux_file_1.png)

从上面的图分析，按列解析：
第一列：授权，第一位代表是文件(-)还是文件夹(d)或者链接文件(l)等，后面九位，每三位代表其中一种身份(Owner、Group、Others)的read、write、exeute权限。
第二列：连接数
第三列：所有者
第四列：用户组
第五列：文件容量
第六列：修改日期
第七列：文件名（如果文件夹前面写着.，那么它就是隐藏文件夹例如 .ssh）

到这为止就知道了基本概念，那么接下来的问题就是如何能够为文件设置权限，以及如何更改权限，ps：知道了理论，咱得应用啊。

* chgrp：chgrp -R[递归子目录] 文件/文件夹名称
* chown：chown -R[递归子目录] 用户：用户组 文件/文件夹
* chmod：改变权限的方法有数字和符号两种
    数字：r-4 w-2 x-1

    例： chmod 777 file

    符号：u-Owner g-Group o-Others a-all 配合符号 + - =

    例： chmod u=rwx,g=rw,o=r file

        chomod a+w file    

刚刚看到在上面图片介绍中，出现了文件、文件夹、连接文件等文件种类，接下来，我们就聊聊Linux中有多少种文件种类。

文件：
    第一个属性为[-]

        普通文件
        纯文本文件
        二进制文件
        数据格式文件

目录（directory）：
    第一个属性为[d]

连接文件：第一个属性为[l]，类似window下的快捷方式。

设备与设备文件（device）：系统外设与存储相关的一些文件。通常存放在/dev这个目录。

        块（block）设备文件：可以进行随机访问的设备，如硬盘、软盘（dev/sda）等。第一个属性是[b]
        字符（character）设备文件：串行接口的设备，如键盘、鼠标等。第一个属性为[c]

套接字（socket）：用于网络上的数据连接，第一个属性为[s]，通常在/var/run目录下。

管道（FIFO，pipe）：用于解决多个程序同时访问同一个文件所造成的错误。第一个属性为[p]

文件扩展名：在Linux系统中，扩展名只是起到一个标识的作用，说白了，就是告诉你这个文件是什么，但并不像windows那样能证明自己是哪种类型的执行文件，一个文件只有具有了“x”权限，才能被执行，当然了执行成不成功就不一定了。

文件名长度：Ext2/Ext3系统单一文件、目录名称最大的长度为255字符。
完整路径的文件、目录名称最长为4096个字符。

[注]：文件名称特殊符号限制如下(不要使用这些)：

        * ? <> ;&![]|\'"`(){}

### 三、Linux目录配置

现在，我们来了解一下每个目录下都存放了什么内容的文件。
为了能够让学习Linux的人在接触一个全新的Linux系统时能够方便快捷找到需要的文件，所以就诞生了FHS标准。

|  | 可分享的（shareable） | 不可分享的（unshareable） |
| :------| ------: | :------: |
| 不变的 | /usr 软件放置处 | /etc 配置文件 |
| 不变的 | /opt 第三方软件 | /boot 开机与内核文件 |
| 可变动的 | /var/mail 用户邮件信箱 | /var/run 程序相关 |
| 可变动的 | /var/spool/news 新闻 | /var/lock 程序相关 |


可分享的目录：可以供网络上别的Linux系统挂载的目录。

不可分享的目录：自己机器上运行的设备文件或者socket文件，不能供其他系统使用的目录。

不变的：有些数据不会经常变动的，例如函数库、文件说明文件。

可变动的：经常改变的数据，如登录文件，新闻组等。

FHS针对目录结构定义了三个目录下应该存放什么数据：
* /(root,根目录)：与开机系统有关，承载着系统开机、还原、修复等操作，FHS希望根目录不要分配到大的分区，以免与太多数据放在一起引起问题（越小越好）。
* /usr(UNIX software resource):与软件安装、执行有关。
* /var (Variable)：与系统运作过程有关。

接着FHS也定义了其他一些子目录，如下：

| 目录 | 应放置文件内容 |
| :------| ------: | 
| /bin |系统有很多放置执行文件的目录，bin目录的特殊之处在于它放置的是**单用户维护模式下还能够被操作**的命令，主要有cat、chmod、chown、date、mv、mkdir、产品、bash|
| /boot |Linux内核文件与开机所需配置文件。|
| /dev |设备文件与接口设备文件都以文件的形式存放在这个目录下，你访问这个目录下的文件就相当于访问某个设备。比较重要的有：/dev/null,/dev/zero,/dev/tty,/dev/lp,/dev/hd,/dev/sd等|  
| /etc |系统主要的配置文件都放置在这个目录中。例如，人员的账户密码文件、各种服务的起始文件，一般用户都可以查看，但是只有root用户才有修改的权限 重要的有：/etc/init.d:所有服务的默认启动脚步都放到这个目录。/etc/xinetd.d:super daemon管理的各项服务的配置文件目录。 /etc/X11:与XWindow有关的各种配置文件。|  
| /home |用户的主目录，有两种表达的方式：1.～ 2.～xufeng|  
| /lib|系统在开机时会用到的函数库，以及在bin或者sbin下面的命令要用到的函数库。/lib/modules：会放置内核相关模块（驱动程序）|  
| /media |放置可删除设备，例如软盘、光盘、DVD。重要的目录有：/media/floppy,/media/cdrom|  
| /mnt |如果你想挂载某些额外的设备，可以选择这个目录。|  
| /opt |放置第三方软件的位置|  
| /root |系统管理员目录，在单用户维护模式下，与根目录在一个分区中是一个比较好的方式。|  
| /sbin |只有root用户可以执行的命令，包括开机、修复、还原系统所需要的命令。|  
| /srv |一些网络服务开启之后的数据存储区域|  
| /tmp |一个任何人都可以访问的暂存目录，请定期清理|

还有一些重要目录需要了解一下：

| 目录 | 应放置文件内容 |
| :------| ------: | 
| /lost+found |系统出现问题时，将一些片段放置到这个目录下|
| /proc |虚拟文件系统，数据都是放置在内存当中的，包括：系统内核、进程、外设的状态、网络状态。比较重要的有：/proc/cpuinfo,/proc/dma,/proc/interrupts,/proc/ioports,/proc/net|
| /sys |虚拟文件系统，同proc很像，保存内核模块与内核检测到的硬件设备信息等|


接下来还有/usr

| 目录 | 应放置文件内容 |
| :------| ------: | 
| /usr/X11R6 |X Window相关|
| /usr/bin |绝大部分用户可以使用的命令都放在这里了，注意与/bin的区别（是否与开机过程有关）|
| /usr/include |c++语言的头文件和包含文件，当我们以tarball方式安装数据时，会使用许多这里的文件|
| /usr/lib |应用软件的函数库、目标文件，执行文件和脚本|
| /usr/local |系统管理员自己下载安装的软件|
| /usr/sbin |非系统正常运行所需的系统命令。常见的网络服务器软件的服务命令。|
| /usr/share |共享的可读取文件，基本都是纯文本|
| /usr/src |源码建议存放在这里。|


最后是/var，组要是针对动态改变的文件，例如缓存，登录文件、以及一些软件产生的文件，包括程序文件（lock file,run file）

| 目录 | 应放置文件内容 |
| :------| ------: | 
| /var/cache/ |应用程序产生的缓存文件|
| /var/lib/ |程序运行过程需要用到的数据文件放置到这里，例如：MySQL有/var/lib/mysql/目录。|
| /var/lock/ |某些设备或者资源只能被一个应用程序占用|
| /var/log/ |登录文件放置处，可查看账户的登录信息|
| /var/mail/ |个人电子邮件信箱，也会被放到/var/spool/mail，两者互为连接文件|
| /var/run/ |某些程序或者服务会将PID放置到这里。|
| /var/spool/ |放置一些队列数据，就是一些等待这被使用的数据。|


### 四、绝对路径与相对路径

绝对路径：由根目录（/）开始写的文件名或者目录名写法。
相对路径：相对于目前路径的文件名写法。

.或./表示当前目录。
..或../表示上一层目录。



















